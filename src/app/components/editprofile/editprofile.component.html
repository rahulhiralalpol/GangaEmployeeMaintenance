<mat-card class="profile-card mat-elevation-z5">
  <div class="header">
    <img
      mat-card-avatar
      id="profileimage"
      class="profile-image"
      src="{{ displayImage() }}"
    />
    <div class="profile-detail">
      <div class="user-name">{{ currentUser.displayName }}</div>
      <div class="user-email">{{ currentUser.email }}</div>
    </div>
  </div>
  <div class="content">
    <mat-tab-group mat-stretch-tabs class="user-tabs">
      <mat-tab label="Basic Details">
        <div class="basic">
          <form
            class="profile-form"
            [formGroup]="profileForm"
            (ngSubmit)="onSubmit()"
          >
            <mat-form-field class="full-width">
              <mat-label>Display Name</mat-label>
              <input
                id="displayname"
                matInput
                placeholder="Display Name"
                formControlName="displayname"
              />
            </mat-form-field>
          </form>
        </div>
      </mat-tab>
      <mat-tab label="Password">
        <div class="passchange">
          <!-- Password Change Form -->
          <form
            class="password-form"
            [formGroup]="passwordForm"
            (ngSubmit)="onSubmit()"
          >
            <div class="formfields">
              <!-- Old Password Field -->
              <mat-form-field class="full-width">
                <mat-label>Old Password</mat-label>
                <input
                  matInput
                  placeholder="Old Password"
                  [type]="hide ? 'password' : 'text'"
                  formControlName="oldpassword"
                />
                <mat-icon
                  matSuffix
                  (click)="hideoldpassword = !hideoldpassword"
                  >{{ hide ? "visibility_off" : "visibility" }}</mat-icon
                >
                <mat-error>{{ getOldPasswordErrorMessage() }}</mat-error>
              </mat-form-field>
              <!-- New Password Field -->
              <mat-form-field class="full-width">
                <mat-label>New Password</mat-label>
                <input
                  matInput
                  placeholder="New Password"
                  [type]="hide ? 'password' : 'text'"
                  formControlName="password"
                  maxlength="15"
                />
                <mat-icon matSuffix (click)="hide = !hide">{{
                  hide ? "visibility_off" : "visibility"
                }}</mat-icon>
                <mat-hint align="end" aria-live="polite">
                  {{ passwordForm.controls.password.value.length }} / 15
                </mat-hint>
                <mat-error *ngIf="NewPasswordHasError()">{{
                  getNewPasswordErrorMessage()
                }}</mat-error>
              </mat-form-field>
              <!-- Password Strength Meter -->
              <app-passwordstrengthindicator
                [password]="passwordForm.controls.password.value"
              ></app-passwordstrengthindicator>
              <!-- Confirm Password Field -->
              <mat-form-field class="full-width">
                <input
                  matInput
                  placeholder="Confirm Password"
                  type="password"
                  formControlName="confpassword"
                />
                <mat-icon matSuffix>visibility_off</mat-icon>
                <mat-error *ngIf="passwordForm.controls.confpassword.invalid">{{
                  getConfPasswordErrorMessage()
                }}</mat-error>
              </mat-form-field>
            </div>
            <div class="submitbuttons">
              <button
                type="submit"
                [disabled]="!passwordForm.valid"
                id="changepasswordbutton"
                color="primary"
                mat-raised-button
              >
                Change Password
              </button>
            </div>
          </form>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</mat-card>
